# Short URL API
> [!NOTE]
> **–£—á–µ–±–Ω—ã–π backend-–ø—Ä–æ–µ–∫—Ç** –Ω–∞ FastAPI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SQLAlchemy 2.0, Prometheus, Grafana –∏ Docker.

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Short URL API** ‚Äî —ç—Ç–æ backend-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ (short URL) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Prometheus –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞:

1. **–°–æ–∑–¥–∞–Ω–∏–µ —à–æ—Ä—Ç-–∫–æ–¥–∞** –¥–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª–∏–Ω–æ–π –æ—Ç 3 –¥–æ 10 —Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞).
2. **–†–µ–¥–∏—Ä–µ–∫—Ç** –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –ø–æ —à–æ—Ä—Ç-–∫–æ–¥—É.
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** –ø–æ —à–æ—Ä—Ç-–∫–æ–¥—É: –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞.

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Docker** –∏ **Docker Compose** –∏ –≤–∫–ª—é—á–∞–µ—Ç 4 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: API, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫, **Prometheus** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ **Grafana** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
### 1. üìÑ –®–æ—Ä—Ç-–∫–æ–¥—ã:
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —à–æ—Ä—Ç-–∫–æ–¥–æ–≤ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ —Å–ª—É—á–∞–π–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞, —Ç–∞–∫ –∏ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

### 2. üîÑ –†–µ–¥–∏—Ä–µ–∫—Ç:
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –ø–æ —à–æ—Ä—Ç-–∫–æ–¥—É.

### 3. üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —à–æ—Ä—Ç-–∫–æ–¥—É: –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è, –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞.

### 4. üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **Prometheus** –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫.
- **Grafana** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏.

## üß† –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **SQLAlchemy 2.0** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
- **Alembic** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏.
- –°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–∏—Ç –∫–æ—Ä–æ—Ç–∫–∏–µ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ —Å –ø–æ–¥—Å—á–µ—Ç–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –ø–µ—Ä–µ—Ö–æ–¥–∞–º.

## üê≥ Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ:
–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Docker Compose** –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

- **API** (FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- **PostgreSQL** (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫)
- **Prometheus** (–î–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫)
- **Grafana** (–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫)

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞:
1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone https://github.com/L1inkoln/short-url.git
   cd short-url
   
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: docker compose up --build**

3. **–î–æ—Å—Ç—É–ø –∫ API –∏ —Å–µ—Ä–≤–∏—Å–∞–º:**

 - *API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8000.*
  
 - *Prometheus –Ω–∞ –ø–æ—Ä—Ç—É 9090.*
  
 - *Grafana –Ω–∞ –ø–æ—Ä—Ç—É 3000.*

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ grafana:**
   
- *–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ localhost:3000*
   
- *–ó–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è —Å admin:admin*
   
- *–ù–∞—Å—Ç—Ä–æ–∏—Ç—å dashboard*

## üì∑ –ü—Ä–∏–º–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π 80rps –Ω–∞ 1 –≤–æ—Ä–∫–µ—Ä–µ:
![Screenshot](assets/grafana.png)

## üí° –°–æ–≤–µ—Ç—ã:
*–í —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –æ–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª.*

*–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫.*